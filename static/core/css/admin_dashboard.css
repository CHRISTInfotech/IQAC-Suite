/* ============ IQAC Suite â€“ Admin Dashboard (Responsive) ============ */

/* Root tokens */
:root{
  --primary:#264487;
  --ink:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --surf:#ffffff;
  --subtle:#f8fafc;
  --tint:#eef2ff;
  --shadow:0 8px 24px rgba(2,6,23,.06);
  --shadow-lg:0 12px 40px rgba(2,6,23,.1);
  --shadow-soft:0 4px 12px rgba(2,6,23,.04);
  --white:#fff;
}

/* Global base */
.ems-dashboard{
  font-family:"Open Sans",system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  color:var(--ink);
}
.ems-dashboard *{ box-sizing:border-box; }
img{ max-width:100%; display:block; }

/* Topbar */
.topbar{
  display:flex; justify-content:space-between; align-items:flex-end;
  margin-bottom:24px; padding-bottom:12px; border-bottom:1px solid var(--border);
}
.topbar h1{
  font-size:clamp(20px,2.2vw,28px); font-weight:800; margin:0;
}
.topbar-date{ font-size:13px; color:var(--muted); }

/* KPI Row */
.kpi-row{ display:flex; flex-wrap:wrap; gap:16px; margin-bottom:24px; }
.kpi-row>*{ flex:1 1 220px; min-width:220px; }

/* KPI cards */
.kpi-link{ text-decoration:none; color:inherit; display:flex; }
.kpi-card, .profile-kpi{
  border:1px solid var(--border); border-radius:12px; background:var(--surf);
  box-shadow:var(--shadow); width:100%; height:100%;
}
.kpi-card{
  padding:12px; display:grid; gap:10px; cursor:pointer;
  grid-template-columns:auto 1fr;
  grid-template-areas:"icon title" "value value";
  transition:transform .2s ease, box-shadow .2s ease;
}
.kpi-card:hover{ transform:translateY(-2px); box-shadow:var(--shadow-lg); }
.kpi-icon{
  grid-area:icon; width:48px; height:48px; border-radius:12px;
  display:flex; align-items:center; justify-content:center; color:#fff; font-size:20px;
}
.kpi-content{ display:contents; }
.kpi-title{ grid-area:title; margin:0 0 0 10px; font-size:13px; font-weight:700; color:var(--ink); }
.kpi-value{ grid-area:value; font-size:clamp(26px,4.2vw,40px); font-weight:800; line-height:1.05; color:var(--ink); margin-top:6px; }
.bg-indigo{ background:#6366f1; } .bg-sky{ background:#0ea5e9; } .bg-orange{ background:#fb923c; } .bg-emerald{ background:#10b981; }

/* Profile KPI */
.profile-kpi{ padding:12px; display:grid; grid-template-columns:80px 1fr; align-items:center; gap:12px; }
.pkp-avatar{ width:80px; height:80px; border-radius:12px; background:#e5e7eb; overflow:hidden; display:flex; align-items:center; justify-content:center; }
.pkp-avatar img{ width:100%; height:100%; object-fit:cover; }
.pkp-initials{ font-weight:800; font-size:24px; color:var(--primary); }
.pkp-body{ display:flex; flex-direction:column; gap:6px; }
.pkp-name{ font-size:18px; font-weight:800; margin:0; line-height:1.2; }
.pkp-sub{ font-size:13px; font-weight:600; color:var(--muted); margin:0; }
.pkp-actions{ margin-top:auto; display:flex; align-items:center; gap:10px; }
.switch-label{ font-size:12px; color:var(--muted); font-weight:600; }
.switch-select{ height:36px; border:1px solid var(--border); border-radius:8px; padding:0 12px; background:#fff; color:var(--ink); font-size:13px; }

/* Core grid */
.grid-3{ display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }
/* Defensive: ensure the three-panel band spans all columns */
.grid-3 > .grid-3-custom{ grid-column:1 / -1 !important; }
@media (max-width:1200px){ .grid-3{ grid-template-columns:repeat(2,1fr); gap:16px; } }
@media (max-width:768px){ .grid-3{ grid-template-columns:1fr; gap:16px; } }

/* Three-column band */
.grid-3-custom{ display:grid; grid-template-columns:1fr 1.8fr 1.2fr; gap:20px; grid-column:1 / -1; margin-top:20px; }
@media (max-width:1400px){ .grid-3-custom{ grid-template-columns:1fr 1.5fr 1fr; } }
@media (max-width:1200px){ .grid-3-custom{ grid-template-columns:1fr; gap:16px; } }

/* Cards */
.card{
  background:#fff; border:1px solid var(--border); border-radius:16px; box-shadow:var(--shadow);
  overflow:hidden; display:flex; flex-direction:column; height:fit-content;
}
.card.eq{ min-height:100%; }
.card-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:18px 20px; border-bottom:1px solid var(--border);
  background:linear-gradient(135deg,var(--subtle) 0%, #fff 100%);
}
.card-header h3{ margin:0; font-size:16px; font-weight:700; color:var(--ink); display:flex; align-items:center; gap:10px; }

/* Stat rows */
.stats-rows{ padding:16px 20px; display:grid; gap:12px; }
.sr{
  display:flex; align-items:center; gap:12px; padding:12px 14px;
  border:1px solid var(--border); border-radius:12px;
  background:linear-gradient(135deg,#fff 0%, var(--subtle) 100%); transition:.2s ease;
}
.sr:hover{ border-color:var(--primary); box-shadow:var(--shadow-soft); transform:translateY(-1px); }
.sr span{ color:var(--muted); font-size:13px; font-weight:600; }
.sr strong{ margin-left:auto; font-size:16px; font-weight:800; }
.sr strong.ok{ color:#16a34a; } .sr strong.bad{ color:#ef4444; }

/* Notifications list */
#cardNotifications{ max-height:500px; }
.list{ display:flex; flex-direction:column; flex:1; min-height:0; padding:0; }
.list-scroll{ flex:1; overflow:auto; padding:16px 20px; scrollbar-width:thin; scrollbar-color:var(--border) transparent; }
.list-scroll::-webkit-scrollbar{ width:6px; } .list-scroll::-webkit-scrollbar-track{ background:transparent; }
.list-scroll::-webkit-scrollbar-thumb{ background:var(--border); border-radius:3px; }
.list-scroll::-webkit-scrollbar-thumb:hover{ background:var(--muted); }
.list-item{
  display:flex; gap:13px; align-items:center; padding:6px 0; border-radius:12px;
  padding-top: 10px;
  border:1px solid var(--border); background:linear-gradient(135deg,#fff 0%, var(--subtle) 100%);
  margin-bottom:12px; transition:.2s ease; position:relative; overflow:hidden;
}
.list-item::before{
  content:''; position:absolute; top:0; left:0; width:3px; height:100%;
  background:linear-gradient(180deg,var(--primary),#6366f1); transform:translateX(-3px); transition:transform .2s ease;
}
.list-item:hover{ border-color:var(--primary); box-shadow:var(--shadow-soft); transform:translateY(-2px); }
.bullet{
  width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center;
  background:linear-gradient(135deg,#eef2ff 0%, #e0e7ff 100%); color:#4f46e5; flex-shrink:0; border:1px solid #e0e7ff; box-shadow:var(--shadow-soft);
}
.bullet-number{
  font-weight:800; font-size:18px; color:#312e81;
}
.list-body{ flex:1; min-width:0; }
.list-body h4{ margin:0 0 4px; font-size:14px; font-weight:700; color:var(--ink); line-height:1.35; }
.list-body .muted{
  margin:0; color:var(--muted); font-size:12.5px; line-height:1.4;
  display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.pill{
  padding:6px 12px; border-radius:999px; background:#f1f5f9; font-weight:800; font-size:11px;
  white-space:nowrap; align-self:flex-start; border:1px solid #e2e8f0; text-transform:uppercase; letter-spacing:.5px;
}
.status-approved{ background:linear-gradient(135deg,#ecfdf5,#d1fae5); color:#059669; border-color:#a7f3d0; }
.status-pending{ background:linear-gradient(135deg,#fffbeb,#fef3c7); color:#d97706; border-color:#fde68a; }
.status-rejected{ background:linear-gradient(135deg,#fef2f2,#fecaca); color:#dc2626; border-color:#fca5a5; }

/* Event details card */
.event-details-content{ padding:16px 18px; flex:1; overflow:auto; }
.event-details-content .empty{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  height:100%; min-height:200px; color:var(--muted); font-size:14px; text-align:center;
}
.event-details-content .empty::before{ content:''; font-size:48px; margin-bottom:12px; opacity:.5; }
.event-detail-item{ margin-bottom:12px; padding:10px 12px; border-radius:8px; border:1px solid var(--border); background:#fff; }
.event-detail-item .row{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.event-detail-item h4{ margin:0; font-size:15px; font-weight:700; color:var(--ink); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.event-detail-item .actions{ flex-shrink:0; display:flex; gap:8px; }
.event-detail-item p{ margin:0 0 4px; font-size:13px; color:var(--muted); }
.event-detail-item .event-time{ font-weight:700; color:var(--primary); }

/* Calendar */
#cardCalendar{ background:#fff; }
.mini-cal{ padding:20px; width:100%; }
.cal-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
#calTitle{ font-weight:800; font-size:18px; color:var(--ink); text-align:center; flex:1; margin:0 16px; }
.cal-nav{
  width:36px; height:36px; border:1px solid var(--border); border-radius:8px; background:#fff; cursor:pointer;
  display:flex; align-items:center; justify-content:center; transition:.2s; color:var(--muted); font-size:16px; font-weight:700;
}
.cal-nav:hover{ background:var(--subtle); border-color:var(--primary); color:var(--primary); transform:translateY(-1px); box-shadow:var(--shadow-soft); }
.cal-weekdays{
  display:grid; grid-template-columns:repeat(7,1fr); gap:4px; font-size:12px; font-weight:700; color:var(--muted); text-align:center; margin-bottom:12px;
}
.cal-weekdays span{ padding:8px 0; text-transform:uppercase; letter-spacing:.5px; }
.cal-grid{ display:grid; grid-template-columns:repeat(7,1fr); gap:4px; }
.cal-grid .day{
  position:relative; height:36px; padding:4px; text-align:center; border-radius:8px; font-weight:600; font-size:14px;
  display:flex; align-items:center; justify-content:center; cursor:pointer; background:#fff; border:1px solid transparent; color:var(--ink); transition:.2s;
}
.cal-grid .day:hover{ background:var(--subtle); border-color:var(--border); transform:translateY(-1px); }
.cal-grid .day.today{ background:var(--primary); color:#fff; font-weight:800; border:1px solid var(--primary); box-shadow:var(--shadow-soft); }
.cal-grid .day.muted{ opacity:.4; cursor:default; color:var(--muted); background:transparent; }
.cal-grid .day.muted:hover{ background:transparent; border-color:transparent; transform:none; }
.cal-grid .day.has-event::after{
  content:""; position:absolute; bottom:4px; left:50%; transform:translateX(-50%);
  width:6px; height:6px; border-radius:50%; background:#e74c3c;
}
.cal-grid .day.selected{ outline:2px solid #93c5fd; box-shadow:inset 0 0 0 2px #bfdbfe; background:#eff6ff; border-color:#bfdbfe; }

/* Actions / links */
.chip-btn{
  margin-top:8px; display:inline-flex; align-items:center; gap:8px;
  border:1px solid var(--border); border-radius:10px; padding:10px 14px;
  text-decoration:none; color:var(--ink); font-weight:700; font-size:13px;
  background:linear-gradient(135deg,#fff 0%, var(--subtle) 100%); transition:.2s;
}
.chip-btn:hover{
  background:linear-gradient(135deg,var(--primary) 0%, #4f46e5 100%);
  border-color:var(--primary); color:#fff; transform:translateY(-1px); box-shadow:var(--shadow-soft);
}
.btn-solid{
  display:inline-flex; align-items:center; gap:8px;
  background:linear-gradient(135deg,var(--primary) 0%, #4f46e5 100%);
  border:1px solid var(--primary); color:#fff; padding:10px 16px; border-radius:10px;
  font-weight:800; font-size:13px; cursor:pointer; text-decoration:none; transition:.2s;
}
.btn-solid:hover{ transform:translateY(-2px); box-shadow:var(--shadow-lg); filter:brightness(1.05); }

/* Export bar (chips removed) */
.ems-dashboard.admin-dash{ padding-bottom:120px; }

.sysbar{
  position:fixed; right:24px; bottom:24px; z-index:1020;
  display:flex; gap:12px; align-items:center;
}
.sysbar .right{ margin-left:0; }

@media (max-width:640px){
  .sysbar{ left:16px; right:16px; justify-content:center; }
}

/* Empty */
.empty{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  padding:40px 20px; color:var(--muted); font-size:14px; text-align:center;
}
.empty::before{ content:''; font-size:48px; margin-bottom:12px; opacity:.5; }

/* Mobile drawer */
.event-sidebar{
  position:fixed; top:0; right:-100%; width:min(420px,100%); height:100%;
  background:var(--surf); box-shadow:-4px 0 12px rgba(0,0,0,.1);
  transition:right .3s ease; z-index:1100; display:flex; flex-direction:column;
}
.event-sidebar.active{ right:0; }
.sidebar-header{ display:flex; justify-content:space-between; align-items:center; padding:1rem; border-bottom:1px solid var(--border); }
.sidebar-header h3{ margin:0; font-size:1.1rem; font-weight:800; }
.sidebar-header button{ background:none; border:none; font-size:1.5rem; cursor:pointer; }
.sidebar-content{ padding:1rem; overflow:auto; flex:1; }
.sidebar-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:1000; opacity:1; transition:opacity .3s; visibility:visible; }
.sidebar-overlay.hidden{ opacity:0; visibility:hidden; }

.event-item{
  display:flex; justify-content:space-between; align-items:center; padding:12px;
  border:1px solid var(--border); border-radius:8px; margin-bottom:8px; background:#fff;
}
.event-title{ font-size:.95rem; font-weight:700; }

/* Height tuning (desktop) */
.grid-3-custom .card{ height:420px; min-height:420px; }
#cardEventDetails{ height:380px; }
#cardNotifications{ height:420px; }
#cardCalendar{ height:420px; }

/* Responsive polish */
@media (max-width:1280px){ .kpi-value{ font-size:clamp(24px,3.5vw,36px); } }
@media (max-width:992px){
  .grid-3-custom .card{ height:auto; min-height:0; }
  #cardEventDetails{ order:3; }
  #cardCalendar{ order:2; }
  #cardNotifications{ order:1; }
}
@media (max-width:640px){
  .kpi-row>*{ min-width:min(260px,100%); }
  .profile-kpi{ grid-template-columns:64px 1fr; }
  .pkp-avatar{ width:64px; height:64px; }
  .topbar{ align-items:flex-start; }
}
@media (max-width:420px){
  .card-header{ padding:14px 16px; }
  .stats-rows{ padding:12px 14px; }
  .chip-btn, .btn-solid{ padding:9px 12px; font-size:12px; }
  .kpi-card{ padding:10px; }
}

/* Motion-reduction */
@media (prefers-reduced-motion:reduce){
  *{ transition:none !important; animation:none !important; }
}
